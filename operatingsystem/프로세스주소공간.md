# 프로세스 주소 공간: 코드, 데이터, 스택 영역의 관리

> 한줄 요약
>
> - 메모리 영역 => TEXT, DATA, BSS, HEAP, STACK 영역

## 메모리 영역

> 프로세스 주소 공간(PAS): 프로세스 생성하여 그에 메모리를 할당하며 생기는 주소 공간
> 이때, 효율적으로 PAS 사용하기 위해, 메모리 영역을 나누어 실행함.
>
> - 메모리 영역 => TEXT, DATA, BSS, HEAP, STACK 영역

#### TEXT == CODE 영역

- 실행할 프로그램 코드를 저장하는 영역
- 실행시 CPU가 TEXT 영역의 명령어를 하나씩 가져가서 처리함
  - 이때 TEXT 영역은 Hex파일이나 Bin파일로 이루어짐

#### DATA 영역

- 프로그램의 전역변수(global), 정적변수(static), 배열(array), 구조체(structure) 등을 저장하는 영역
- 프로그램 시작과 함께 할당됨
- 프로그램 종료시 소멸됨
- 데이터가 초기화 됐다면? data 영역에 저장
  - 초기화 되지 않았다면? BSS (Block Stated Symbol) 영역에 저장
- 함수 내부에 선언된 Static 변수는 프로그램이 실행 될 때 공간만 할당됨
  - 함수가 실행 될 때 초기화 됨
- 전역변수, static 값을 참조한 코드는, 컴파일된 다음 Data영역 주소값을 가리키도록 변경됨

#### STACK

- 프로그램이 자동으로 사용하는 임시 메모리 영역
- 잠시 사용되었다가 사라지는 데이터를 저장하는 영역
  - ex. 지역(local) 변수, 매개변수(parameter), 리턴 값
- 함수의 호출과 함께 할당됨
- 함수의 호출 완료시 소멸
- 스택 프레임(stack frame): 스택 영역에 저장되는 함수의 호출 정보
- 주소 할당 방향: 메모리의 상위 주소 -> 하위 주소 방향
  - 힙과 반대!
- 무한한 할당 불가. 컴파일 타임에 크기가 결정되기 떄문
  - stack overflow 발생!
  - 재귀함수가 너무 깊게 호출되거나, 함수가 지역변수를 너무 많이 가지고 있어서 stack 영역을 초과하는 것

#### HEAP

- 사용자에 의해 메모리 공간이 동적으로 할당되고 해제되는 영역
- 주소 할당 방향: 메모리의 하위 주소 -> 상위 주소 방향
  - 스택과 반대!
- 클래스, 클로저와 같은 참조형의 데이터 값이 저장됨
- 런타임시 크기 결정

![image](https://github.com/do-sopt-cs-study/CS-yujin/assets/91943160/a4ec0f1d-dd78-4e53-a4a4-618dfccc15ed)
